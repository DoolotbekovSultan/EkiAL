# exceptions/

## –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–ü–∞–ø–∫–∞ `exceptions` —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ—à–∏–±–æ–∫ –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –≤–æ –≤—Å–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞
**exceptions/** - ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- app_exceptions.dart - üéØ –ë–∞–∑–æ–≤—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- failure.dart - ‚ùå Failure –∫–ª–∞—Å—Å—ã
- exception_handler.dart - üõ°Ô∏è –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- network_exceptions.dart - üåê –°–µ—Ç–µ–≤—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- local_exceptions.dart - üíæ –õ–æ–∫–∞–ª—å–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è

## –û–ø–∏—Å–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

### app_exceptions.dart
–ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã –∏—Å–∫–ª—é—á–µ–Ω–∏–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

–°–æ–¥–µ—Ä–∂–∏—Ç:
- –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å AppException
- –æ–±—â–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –∏–µ—Ä–∞—Ä—Ö–∏—é –∏—Å–∫–ª—é—á–µ–Ω–∏–π

### failure.dart
–ö–ª–∞—Å—Å—ã Failure –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫.

–°–æ–¥–µ—Ä–∂–∏—Ç:
- –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å Failure
- —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ Failure –∫–ª–∞—Å—Å—ã
- –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –≤ Failure

### exception_handler.dart
–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏—Å–∫–ª—é—á–µ–Ω–∏–π.

–°–æ–¥–µ—Ä–∂–∏—Ç:
- –≥–ª–æ–±–∞–ª—å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
- –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è

### network_exceptions.dart
–°–µ—Ç–µ–≤—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è.

–°–æ–¥–µ—Ä–∂–∏—Ç:
- –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –æ–±—Ä–∞–±–æ—Ç–∫—É HTTP —Å—Ç–∞—Ç—É—Å–æ–≤
- —Ç–∞–π–º–∞—É—Ç—ã –∏ –æ—à–∏–±–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### local_exceptions.dart
–õ–æ–∫–∞–ª—å–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è.

–°–æ–¥–µ—Ä–∂–∏—Ç:
- –æ—à–∏–±–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –æ—à–∏–±–∫–∏ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
- –æ—à–∏–±–∫–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–æ –≤—Å–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–µ—Ç–µ–≤—ã—Ö –∏ –±–∏–∑–Ω–µ—Å-–æ—à–∏–±–æ–∫
- –£–ø—Ä–æ—â–µ–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è error cases
- –ü–æ–Ω—è—Ç–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

## Best Practices

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Failure –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
2. –ü—Ä–µ–æ–±—Ä–∞–∑—É–π—Ç–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –≤ Failure –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
3. –õ–æ–≥–∏—Ä—É–π—Ç–µ –≤—Å–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
4. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–π—Ç–µ –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
5. –†–∞–∑–¥–µ–ª—è–π—Ç–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏ –±–∏–∑–Ω–µ—Å-–∏—Å–∫–ª—é—á–µ–Ω–∏—è
6. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–ª–æ–±–∞–ª—å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–ª—è –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```dart
// –ë–∞–∑–æ–≤–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
class AppException implements Exception {
  final String message;
  final StackTrace? stackTrace;

  const AppException(this.message, [this.stackTrace]);
}

// –°–µ—Ç–µ–≤–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
class NetworkException extends AppException {
  const NetworkException(String message) : super(message);
}

// Failure –∫–ª–∞—Å—Å
@freezed
class Failure with _$Failure {
  const factory Failure.networkError(String message) = NetworkError;
  const factory Failure.serverError(String message) = ServerError;
  const factory Failure.localStorageError(String message) = LocalStorageError;
  const factory Failure.validationError(String message) = ValidationError;
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
class UserRepositoryImpl implements UserRepository {
  @override
  Future<Either<Failure, User>> getUser(String id) async {
    try {
      final user = await remoteDataSource.getUser(id);
      return Right(user);
    } on NetworkException catch (e) {
      return Left(Failure.networkError(e.message));
    } on ServerException catch (e) {
      return Left(Failure.serverError(e.message));
    }
  }
}

// –ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
void main() {
  runZonedGuarded(() {
    runApp(MyApp());
  }, (error, stackTrace) {
    ExceptionHandler.handle(error, stackTrace);
  });
}

// –ò–µ—Ä–∞—Ä—Ö–∏—è –∏—Å–∫–ª—é—á–µ–Ω–∏–π
Exception
‚îú‚îÄ‚îÄ AppException
‚îÇ   ‚îú‚îÄ‚îÄ NetworkException
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SocketException
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TimeoutException
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ HttpException
‚îÇ   ‚îú‚îÄ‚îÄ LocalException
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DatabaseException
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FileSystemException
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CacheException
‚îÇ   ‚îî‚îÄ‚îÄ BusinessException
‚îÇ       ‚îú‚îÄ‚îÄ ValidationException
‚îÇ       ‚îú‚îÄ‚îÄ AuthenticationException
‚îÇ       ‚îî‚îÄ‚îÄ AuthorizationException
‚îî‚îÄ‚îÄ Failure
    ‚îú‚îÄ‚îÄ NetworkError
    ‚îú‚îÄ‚îÄ ServerError
    ‚îú‚îÄ‚îÄ LocalStorageError
    ‚îî‚îÄ‚îÄ ValidationError