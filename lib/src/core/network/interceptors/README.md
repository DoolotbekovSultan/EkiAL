# Interceptors

## Назначение
Папка `interceptors` содержит перехватчики для обработки HTTP запросов и ответов. Обеспечивает централизованную логику для cross-cutting concerns сетевого слоя.

## Структура
interceptors/
├── auth_interceptor.dart
├── logging_interceptor.dart
├── retry_interceptor.dart
└── error_interceptor.dart

## Описание файлов

### auth_interceptor.dart
Перехватчик для работы с авторизацией. Содержит:
- Добавление JWT токенов в заголовки
- Обновление access token при истечении
- Обработку 401 ошибок (unauthorized)
- Логику повторной аутентификации

### logging_interceptor.dart
Перехватчик для логирования сетевых операций. Содержит:
- Запись всех исходящих запросов
- Логирование входящих ответов
- Форматирование логов для удобства чтения
- Фильтрацию конфиденциальных данных

### retry_interceptor.dart
Перехватчик для повторных попыток запросов. Содержит:
- Стратегии повторения при сетевых сбоях
- Настройку максимального количества попыток
- Экспоненциальные задержки между попытками
- Условия для повторения запросов

### error_interceptor.dart
Перехватчик для обработки ошибок. Содержит:
- Преобразование DioError в кастомные исключения
- Обработку различных типов сетевых ошибок
- Форматирование сообщений об ошибках
- Логику восстановления после ошибок

## Преимущества

- **Централизация** - единое место для общей логики запросов
- **Модульность** - легко добавлять/удалять функциональность
- **Тестируемость** - каждый интерцептор тестируется изолированно
- **Гибкость** - настраиваемая цепочка обработки
- **Производительность** - оптимизированная обработка запросов

## Best Practices

1. Соблюдайте порядок интерцепторов в цепочке
2. Обрабатывайте исключения внутри интерцепторов
3. Используйте conditional логику для разных окружений
4. Логируйте в dev режиме, минимизируйте в production
5. Тестируйте все сценарии работы интерцепторов
6. Следите за производительностью тяжелых операций
7. Документируйте специфичное поведение каждого интерцептора